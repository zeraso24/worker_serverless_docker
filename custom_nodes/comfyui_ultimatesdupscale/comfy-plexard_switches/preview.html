<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skin Texture Modifier - Enhanced Preview</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 24px;
            font-weight: 600;
        }
        
        .header p {
            margin: 5px 0 0 0;
            opacity: 0.9;
            font-size: 14px;
        }
        
        .content {
            padding: 30px;
        }
        
        .section {
            margin-bottom: 25px;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .section-title::before {
            content: "üé®";
            margin-right: 8px;
        }
        
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .control-group {
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            padding: 15px;
            background: #f8f9fa;
        }
        
        .control-group.active {
            border-color: #4facfe;
            background: #f0f8ff;
        }
        
        .control-label {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }
        
        .control-label::before {
            content: "üîß";
            margin-right: 8px;
        }
        
        .dropdown {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            background: white;
            font-size: 14px;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }
        
        .dropdown:hover {
            border-color: #4facfe;
        }
        
        .dropdown:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }
        
        .custom-prompt {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            background: white;
            font-size: 12px;
            color: #333;
            resize: vertical;
            min-height: 60px;
            font-family: 'Courier New', monospace;
        }
        
        .custom-prompt:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }
        
        .default-prompt {
            font-size: 11px;
            color: #666;
            background: #f0f0f0;
            padding: 5px 8px;
            border-radius: 4px;
            margin-top: 5px;
            font-family: 'Courier New', monospace;
        }
        
        .preview-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .preview-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .preview-title::before {
            content: "üìù";
            margin-right: 8px;
        }
        
        .prompt-preview {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: #333;
            min-height: 80px;
            word-wrap: break-word;
            white-space: pre-wrap;
        }
        
        .base-prompt-section {
            margin-bottom: 20px;
        }
        
        .base-prompt-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
            resize: vertical;
            min-height: 60px;
        }
        
        .base-prompt-input:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }
        
        .footer {
            background: #f8f9fa;
            padding: 15px 30px;
            text-align: center;
            color: #666;
            font-size: 12px;
        }
        
        .comfyui-style {
            border: 2px solid #4facfe;
            border-radius: 10px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }
        
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-off { background: #dc3545; }
        .status-low { background: #ffc107; }
        .status-medium { background: #17a2b8; }
        .status-high { background: #28a745; }
    </style>
</head>
<body>
    <div class="container comfyui-style">
        <div class="header">
            <h1>üé® Skin Texture Modifier - Enhanced</h1>
            <p>ComfyUI Custom Node - Preview with Custom Prompts</p>
        </div>
        
        <div class="content">
            <div class="section">
                <div class="section-title">Base Prompt Input</div>
                <div class="base-prompt-section">
                    <textarea class="base-prompt-input" id="basePrompt" placeholder="Enter your base prompt here...">a beautiful portrait of a person</textarea>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">Skin Texture Controls</div>
                <div class="controls-grid">
                    <div class="control-group" id="pores-group">
                        <div class="control-label">Pores (Poros)</div>
                        <select class="dropdown" id="pores">
                            <option value="off">Off</option>
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                        <textarea class="custom-prompt" id="pores-custom" placeholder="Custom prompt for pores (leave empty to use default)"></textarea>
                        <div class="default-prompt" id="pores-default">Default: smooth skin texture, minimal visible pores</div>
                        <div class="default-prompt" id="pores-sending" style="background: #d1ecf1; color: #0c5460; margin-top: 5px; font-weight: bold;">Sending: (select a level to see)</div>
                    </div>
                    
                    <div class="control-group" id="facial_hair-group">
                        <div class="control-label">Facial Hair (Vello)</div>
                        <select class="dropdown" id="facial_hair">
                            <option value="off">Off</option>
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                        <textarea class="custom-prompt" id="facial_hair-custom" placeholder="Custom prompt for facial hair (leave empty to use default)"></textarea>
                        <div class="default-prompt" id="facial_hair-default">Default: clean-shaven, smooth skin</div>
                        <div class="default-prompt" id="facial_hair-sending" style="background: #d1ecf1; color: #0c5460; margin-top: 5px; font-weight: bold;">Sending: (select a level to see)</div>
                    </div>
                    
                    <div class="control-group" id="freckles-group">
                        <div class="control-label">Freckles (Pecas)</div>
                        <select class="dropdown" id="freckles">
                            <option value="off">Off</option>
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                        <textarea class="custom-prompt" id="freckles-custom" placeholder="Custom prompt for freckles (leave empty to use default)"></textarea>
                        <div class="default-prompt" id="freckles-default">Default: clear complexion, minimal freckles</div>
                        <div class="default-prompt" id="freckles-sending" style="background: #d1ecf1; color: #0c5460; margin-top: 5px; font-weight: bold;">Sending: (select a level to see)</div>
                    </div>
                    
                    <div class="control-group" id="wrinkles-group">
                        <div class="control-label">Wrinkles (Arrugas)</div>
                        <select class="dropdown" id="wrinkles">
                            <option value="off">Off</option>
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                        <textarea class="custom-prompt" id="wrinkles-custom" placeholder="Custom prompt for wrinkles (leave empty to use default)"></textarea>
                        <div class="default-prompt" id="wrinkles-default">Default: youthful skin, fine lines</div>
                        <div class="default-prompt" id="wrinkles-sending" style="background: #d1ecf1; color: #0c5460; margin-top: 5px; font-weight: bold;">Sending: (select a level to see)</div>
                    </div>
                    
                    <div class="control-group" id="skin_tone-group">
                        <div class="control-label">Skin Tone (Tono)</div>
                        <select class="dropdown" id="skin_tone">
                            <option value="off">Off</option>
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                        <textarea class="custom-prompt" id="skin_tone-custom" placeholder="Custom prompt for skin tone (leave empty to use default)"></textarea>
                        <div class="default-prompt" id="skin_tone-default">Default: even skin tone, uniform complexion</div>
                        <div class="default-prompt" id="skin_tone-sending" style="background: #d1ecf1; color: #0c5460; margin-top: 5px; font-weight: bold;">Sending: (select a level to see)</div>
                    </div>
                    
                    <div class="control-group" id="blemishes-group">
                        <div class="control-label">Blemishes (Manchas)</div>
                        <select class="dropdown" id="blemishes">
                            <option value="off">Off</option>
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                        <textarea class="custom-prompt" id="blemishes-custom" placeholder="Custom prompt for blemishes (leave empty to use default)"></textarea>
                        <div class="default-prompt" id="blemishes-default">Default: clear skin, minimal imperfections</div>
                        <div class="default-prompt" id="blemishes-sending" style="background: #d1ecf1; color: #0c5460; margin-top: 5px; font-weight: bold;">Sending: (select a level to see)</div>
                    </div>
                    
                    <div class="control-group" id="redness-group">
                        <div class="control-label">Redness (Enrojecimiento)</div>
                        <select class="dropdown" id="redness">
                            <option value="off">Off</option>
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                        <textarea class="custom-prompt" id="redness-custom" placeholder="Custom prompt for redness (leave empty to use default)"></textarea>
                        <div class="default-prompt" id="redness-default">Default: neutral skin tone, no redness</div>
                        <div class="default-prompt" id="redness-sending" style="background: #d1ecf1; color: #0c5460; margin-top: 5px; font-weight: bold;">Sending: (select a level to see)</div>
                    </div>
                    
                    <div class="control-group" id="roughness-group">
                        <div class="control-label">Roughness (Aspereza)</div>
                        <select class="dropdown" id="roughness">
                            <option value="off">Off</option>
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                        <textarea class="custom-prompt" id="roughness-custom" placeholder="Custom prompt for roughness (leave empty to use default)"></textarea>
                        <div class="default-prompt" id="roughness-default">Default: soft skin texture, smooth feel</div>
                        <div class="default-prompt" id="roughness-sending" style="background: #d1ecf1; color: #0c5460; margin-top: 5px; font-weight: bold;">Sending: (select a level to see)</div>
                    </div>
                </div>
            </div>
            
            <div class="preview-section">
                <div class="preview-title">üìù Prompt Breakdown</div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="margin: 0 0 10px 0; color: #333; font-size: 14px;">üî§ Generic Prompt (Base):</h4>
                    <div class="prompt-preview" id="genericPrompt" style="background: #e8f4fd; border-color: #4facfe;">
                        a beautiful portrait of a person
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="margin: 0 0 10px 0; color: #333; font-size: 14px;">‚ûï What's Being Added:</h4>
                    <div class="prompt-preview" id="addedPrompts" style="background: #fff3cd; border-color: #ffc107; min-height: 60px;">
                        No modifiers selected yet
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="margin: 0 0 10px 0; color: #333; font-size: 14px;">üéØ Final Result:</h4>
                    <div class="prompt-preview" id="finalPrompt" style="background: #d4edda; border-color: #28a745;">
                        a beautiful portrait of a person
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>üé® Enhanced Skin Texture Modifier Node for ComfyUI | Compatible with SeedDream</p>
        </div>
    </div>

    <script>
        // Modifiers data
        const modifiers = {
            pores: {
                low: "smooth skin texture, minimal visible pores",
                medium: "natural skin texture, slightly visible pores",
                high: "detailed skin texture, prominent visible pores"
            },
            facial_hair: {
                low: "clean-shaven, smooth skin",
                medium: "light facial hair, subtle stubble",
                high: "visible facial hair, natural hair texture"
            },
            freckles: {
                low: "clear complexion, minimal freckles",
                medium: "natural freckles, scattered across face",
                high: "prominent freckles, abundant across face"
            },
            wrinkles: {
                low: "youthful skin, fine lines",
                medium: "mature skin, moderate wrinkles",
                high: "aged skin, deep wrinkles and lines"
            },
            skin_tone: {
                low: "even skin tone, uniform complexion",
                medium: "natural skin tone, slight variations",
                high: "diverse skin tone, natural variations"
            },
            blemishes: {
                low: "clear skin, minimal imperfections",
                medium: "natural skin, some blemishes",
                high: "realistic skin, visible imperfections"
            },
            redness: {
                low: "neutral skin tone, no redness",
                medium: "natural skin tone, slight redness",
                high: "flushed skin, visible redness"
            },
            roughness: {
                low: "soft skin texture, smooth feel",
                medium: "natural skin texture, moderate roughness",
                high: "rough skin texture, weathered appearance"
            }
        };

        function updatePrompt() {
            const basePrompt = document.getElementById('basePrompt').value;
            const activeModifiers = [];
            const addedPrompts = [];
            
            // Check each dropdown
            Object.keys(modifiers).forEach(key => {
                const select = document.getElementById(key);
                const customText = document.getElementById(key + '-custom').value;
                const value = select.value;
                
                if (value !== 'off') {
                    let promptText;
                    if (customText.trim()) {
                        promptText = customText.trim();
                    } else {
                        promptText = modifiers[key][value];
                    }
                    
                    const fullPrompt = `important to add: ${promptText}`;
                    activeModifiers.push(fullPrompt);
                    addedPrompts.push(`${key} (${value}): ${fullPrompt}`);
                }
            });
            
            // Update generic prompt
            document.getElementById('genericPrompt').textContent = basePrompt || 'No base prompt provided';
            
            // Update added prompts
            if (addedPrompts.length > 0) {
                document.getElementById('addedPrompts').textContent = addedPrompts.join('\n');
            } else {
                document.getElementById('addedPrompts').textContent = 'No modifiers selected yet';
            }
            
            // Update final result
            if (basePrompt && activeModifiers.length > 0) {
                document.getElementById('finalPrompt').textContent = `${basePrompt}, ${activeModifiers.join(', ')}`;
            } else if (activeModifiers.length > 0) {
                document.getElementById('finalPrompt').textContent = activeModifiers.join(', ');
            } else {
                document.getElementById('finalPrompt').textContent = basePrompt || 'No base prompt provided';
            }
        }

        function updateDefaultPrompts() {
            Object.keys(modifiers).forEach(key => {
                const select = document.getElementById(key);
                const value = select.value;
                const defaultElement = document.getElementById(key + '-default');
                
                if (value !== 'off') {
                    const defaultText = modifiers[key][value];
                    defaultElement.textContent = `Default: ${defaultText}`;
                } else {
                    defaultElement.textContent = `Default: ${modifiers[key]['low']}`;
                }
            });
        }

        function updateGroupStatus() {
            Object.keys(modifiers).forEach(key => {
                const select = document.getElementById(key);
                const group = document.getElementById(key + '-group');
                
                if (select.value !== 'off') {
                    group.classList.add('active');
                } else {
                    group.classList.remove('active');
                }
            });
        }

        // Add event listeners
        Object.keys(modifiers).forEach(key => {
            document.getElementById(key).addEventListener('change', () => {
                updatePrompt();
                updateDefaultPrompts();
                updateGroupStatus();
            });
            
            document.getElementById(key + '-custom').addEventListener('input', updatePrompt);
        });

        document.getElementById('basePrompt').addEventListener('input', updatePrompt);

        // Initial update
        updatePrompt();
        updateDefaultPrompts();
        updateGroupStatus();
    </script>
</body>
</html>